# 📚 네트워크 기본 개념 정리

## 📖 OSI 모델

### OSI 모델이란?
- 네트워크 통신 기능을 7개 계층으로 나눈 개념적 프레임워크이다.  
- 서로 다른 컴퓨터 시스템 간의 원활한 통신을 위한 표준을 제공한다.

<img src="./image/1_1.png" alt="설명" width="500" style="display: block; margin: auto;">

### OSI 7계층 상세

1. **물리 계층**  
   - 전기 신호로 데이터를 전송하며 케이블, 허브 등 하드웨어가 포함된다.  
   - 데이터 단위: 비트 (Bit)
2. **데이터 링크 계층**  
   - 같은 네트워크 내에서 오류 없이 데이터 전송을 수행한다. (MAC 주소 사용)  
   - Ethernet, PPP 등 실제 네트워크 인터페이스 기술이 포함된다.
3. **네트워크 계층**  
   - 서로 다른 네트워크 간의 경로를 설정하고 라우팅을 담당한다.  
   - IP 주소를 사용하며, TTL(Time To Live)을 통해 무한 루프를 방지한다.  
   - ARP(Address Resolution Protocol), ICMP(인터넷 제어 메시지 프로토콜)도 이 계층에 해당한다.
4. **전송 계층**  
   - 종단 간 신뢰성 있는 데이터 전송을 담당한다. (TCP/UDP 사용)  
   - TCP는 연결지향적 방식이며, 신뢰성 보장을 위해 3-Way Handshake를 사용한다.  
     1. 클라이언트 → 서버 : SYN  
     2. 서버 → 클라이언트 : SYN-ACK  
     3. 클라이언트 → 서버 : ACK  
   - 연결 종료 시에는 FIN과 ACK를 주고받는 4-Way Handshake가 사용된다.  
   - 반면, UDP는 비연결성으로 빠른 전송이 가능하지만 순서 보장 및 오류 검출이 없다.
5. **세션 계층**  
   - 통신 세션을 설정하고 동기화 및 유지 관리를 한다.  
6. **프레젠테이션 계층**  
   - 데이터를 암호화하거나 압축하여 애플리케이션이 이해할 수 있는 형태로 변환한다.  
   - 예: SSL/TLS
7. **애플리케이션 계층**  
   - 사용자에게 네트워크 서비스를 제공한다. (HTTP, FTP, DNS 등)  
   - 실제 사용자의 요청과 응답이 이루어지는 계층이다.

---

## 📖 TCP/IP 모델

### TCP/IP 모델이란?
- 인터넷 및 대부분의 네트워크에서 사용하는 통신 프로토콜의 집합이다.
- 하드웨어, OS와 무관하게 작동하는 유연한 구조를 가진다.

<img src="./image/2_1.png" alt="설명" width="300" style="display: block; margin: auto;">

### TCP/IP 4계층

1. **네트워크 접근 계층**  
   - 실제 네트워크를 통해 데이터를 송수신한다. (Ethernet, Wi-Fi)  
   - 이더넷 환경에서는 MTU(Maximum Transmission Unit)가 1500바이트로 설정되어 있으며, 이보다 큰 데이터는 IP 단편화(fragmentation)를 통해 쪼개서 전송된다.  
   - 각 장치는 MAC 주소를 통해 식별되며, 포트 스위칭 방식으로 데이터가 전달된다.

2. **인터넷 계층**  
   - 데이터를 목적지까지 전달하는 역할을 한다.  
   - IP(IPv4, IPv6), ARP, ICMP 등이 포함된다.  
   - 패킷에는 TTL(Time To Live) 값이 포함되어 있어 무한 루프 방지를 위해 라우터를 거칠 때마다 감소하며, 0이 되면 폐기된다.

3. **전송 계층**  
   - TCP, UDP를 통해 애플리케이션 간 통신을 지원한다.  
   - TCP는 신뢰성 있는 전송을 위해 포트 번호를 통해 통신 흐름을 구분하고, 순서 보장 및 오류 복구 기능을 제공한다.  
   - 포트 번호는 0~65535 범위를 가지며, 0~1023은 well-known 포트(HTTP:80, HTTPS:443), 1024~49151은 등록 포트, 49152~65535는 동적 포트로 사용된다.

4. **응용 계층**  
   - HTTP, FTP, SMTP, DNS 등 다양한 프로토콜이 이 계층에서 동작한다.  
   - 사용자의 요청과 응답을 처리하며, 실제 서비스와 연결되는 부분이다.  
   - DNS와 같은 프로토콜은 도메인을 IP로 해석하는 기능을 제공한다.

---

### TCP 통신 과정 (3-Way Handshake)

1. 클라이언트 → 서버 : SYN  
2. 서버 → 클라이언트 : SYN-ACK  
3. 클라이언트 → 서버 : ACK  

이 과정을 통해 양측은 통신을 위한 연결을 수립한다.  
연결이 종료될 때는 4-Way Handshake(FIN/ACK)가 사용된다.

<img src="./image/2_2.png" alt="설명" width="500" style="display: block; margin: auto;">

---

### UDP 통신

- 연결 설정 없이 데이터를 빠르게 전송한다.  
- 오류 검출, 순서 보장 없이 전송한다.  
- 실시간 성능이 중요한 경우(예: 영상 스트리밍, VoIP, 게임 등)에 주로 사용된다.

<img src="./image/2_3.png" alt="설명" width="500" style="display: block; margin: auto;">

---

## 📖 DNS (Domain Name System)

### DNS란?
- 사람이 이해하기 쉬운 도메인명을 IP 주소로 변환하는 시스템이다.  
- 인터넷의 전화번호부와 같은 역할을 수행한다.  
- DNS 요청 시, 네트워크 내부에서는 NAT(Network Address Translation)를 통해 내부 사설 IP가 외부 공인 IP로 변환되어 전달된다.

---

### DNS 서버 구조

1. **리커서** : 클라이언트 요청을 처음 받는 서버  
2. **루트 서버** : TLD 서버 위치 안내  
3. **TLD 서버** : .com, .net 등 최상위 도메인 관리  
4. **권한 있는 이름 서버** : 실제 IP 정보를 가지고 응답

<div style="display: flex; justify-content: center; gap: 20px;">
  <img src="./image/3_1.png" alt="설명" style="width: 30%; height: auto;">
  <img src="./image/3_2.png" alt="설명" style="width: 30%; height: auto;">
  <img src="./image/3_2.png" alt="설명" style="width: 30%; height: auto;">
</div>

---

### DNS 조회의 8단계 요약

1. 사용자가 도메인 입력  
2. 재귀 확인자가 루트 서버에 질의  
3. 루트 서버가 TLD 서버 반환  
4. TLD 서버에 질의  
5. 도메인 네임 서버 주소 반환  
6. 해당 네임 서버에 질의  
7. IP 주소 반환  
8. 브라우저가 해당 IP로 접속

<img src="./image/3_4.png" alt="설명" width="500" style="display: block; margin: auto;">

---

### DNS 확인자란?

- 클라이언트 요청을 처음 처리하는 DNS 구성 요소  
- 필요한 정보를 얻기 위해 여러 DNS 서버에 순차적으로 쿼리를 보낸다.  
- 캐시된 데이터를 이용하여 응답 속도를 높일 수 있다.

---

### DNS 쿼리 유형

1. **재귀 쿼리**: 클라이언트 대신 최종 IP 주소까지 조회  
2. **반복 쿼리**: 다음 서버 위치만 반환, 클라이언트가 직접 반복 조회  
3. **비재귀 쿼리**: 캐시된 데이터로 즉시 응답
